<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Produtos Edel+White 2025</title>
<style>
  :root{
    --brand-red:#E30613;
    --brand-dark:#1E1E1E;
    --bg:#F7F7F8;
    --muted:#7A7A7A;
    --radius:12px;
    /* Cores dos status */
    --status-ativo: #006400;
    --status-inativo: 	#FF0000;
    --status-promocional: #FF1493;
    --status-personalizada: #00008B;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:#222;
  }
  .container{
    max-width:1200px; margin:32px auto; padding:0 16px;
  }

  /* Header */
  .page-header{
    display:flex; align-items:center; justify-content:space-between; margin-bottom:16px;
  }
  .title{
    margin:0;
    font-weight:800; letter-spacing:.2px;
    font-size:clamp(22px,3.5vw,36px);
    color:var(--brand-dark);
    
  }
  .title-accent{
    color:var(--brand-red);
  }

  /* Search */
  .search-wrap{
    position:relative; margin:16px 0 20px;
  }
  .search-input{
    width:100%; padding:14px 44px 14px 44px; border-radius:999px;
    border:1.5px solid #E3E3E7; outline:none; font-size:15px; background:#fff;
    box-shadow:0 1px 3px rgba(0,0,0,.04);
  }
  .search-input:focus{ border-color:var(--brand-red); box-shadow:0 0 0 4px rgba(227,6,19,.12); }
  .search-icon{
    position:absolute; left:14px; top:50%; transform:translateY(-50%); width:20px; height:20px; opacity:.7;
  }
  .search-clear{
    position:absolute; right:10px; top:50%; transform:translateY(-50%);
    border:none; background:transparent; cursor:pointer; padding:6px; border-radius:8px;
  }

  /* Table */
  .card{
    background:#fff; border-radius:var(--radius); overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,.06);
  }
  table{ width:100%; border-collapse:collapse; }
  thead th{
    position:sticky; top:0; z-index:2;
    background:var(--brand-red); color:#fff; text-align:left; padding:14px 12px; font-weight:700;
  }
  tbody td{ padding:12px; border-top:1px solid #F0F0F2; }
  tbody tr:hover{ background:#FFF5F6; }
  .sku-col{ white-space:nowrap; }
  
  /* Status select styling com cores */
  .status-select {
    width: 100%;
    padding: 6px 8px;
    border: 1.5px solid #E3E3E7;
    border-radius: 6px;
    background: white;
    font-size: 14px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s ease;
  }
  .status-select:focus {
    outline: none;
    border-color: var(--brand-red);
    box-shadow: 0 0 0 2px grey;
  }
  .status-select:disabled {
    background-color: #f5f5f5;
    cursor: not-allowed;
    opacity: 0.7;
  }

  /* Cores específicas para cada status */
  .status-select option[value="Ativo"] {
    background: var(--status-ativo);
    color: white;
  }
  .status-select option[value="Inativo"] {
    background: var(--status-inativo);
    color: white;
  }
  .status-select option[value="Promocional"] {
    background: var(--status-promocional);
    color: white;
  }
  .status-select option[value="Personalizada"] {
    background: var(--status-personalizada);
    color: white;
  }

  /* Estilos para o select baseado no valor selecionado */
  .status-select[data-status="Ativo"] {
    background: rgba(16, 185, 129, 0.1);
    border-color: var(--status-ativo);
    color: var(--status-ativo);
  }
  .status-select[data-status="Inativo"] {
    background: rgba(239, 68, 68, 0.1);
    border-color: var(--status-inativo);
    color: var(--status-inativo);
  }
  .status-select[data-status="Promocional"] {
    background: rgba(179, 130, 130, 0.1);
    border-color: var(--status-promocional);
    color: var(--status-promocional);
  }
  .status-select[data-status="Personalizada"] {
    background: rgba(59, 130, 246, 0.1);
    border-color: var(--status-personalizada);
    color: var(--status-personalizada);
  }

  /* Badges para visualização alternativa */
  .status-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }
  .status-badge.ativo {
    background: var(--status-ativo);
    color: white;
  }
  .status-badge.inativo {
    background: var(--status-inativo);
    color: white;
  }
  .status-badge.promocional {
    background: var(--status-promocional);
    color: white;
  }
  .status-badge.personalizada {
    background: var(--status-personalizada);
    color: white;
  }

  /* Lock button in header */
  .lock-btn{
    display:inline-flex; align-items:center; gap:8px;
    color:#fff; background:transparent; border:none; cursor:pointer; margin-left:6px;
    font:inherit; padding:4px 8px; border-radius:8px;
  }
  .lock-btn:hover{ background:rgba(255,255,255,.14); }
  .lock-icon{ width:18px; height:18px; }

  /* Modal */
  .modal{
    position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.4);
  }
  .modal.show{ display:grid; }
  .dialog{
    background:#fff; padding:22px; width:min(92vw,420px); border-radius:16px;
    box-shadow:0 12px 28px rgba(0,0,0,.18);
  }
  .dialog h3{ margin:0 0 10px; color:var(--brand-dark); }
  .dialog p{ margin:0 0 16px; color:var(--muted); }
  .field{ display:flex; gap:10px; }
  .field input{
    flex:1; padding:12px 14px; border-radius:10px; border:1.5px solid #E1E1E5; outline:none;
  }
  .field input:focus{ border-color:var(--brand-red); box-shadow:0 0 0 4px rgba(227,6,19,.12); }
  .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:16px; }
  .btn{
    border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600;
  }
  .btn.primary{ background:var(--brand-red); color:#fff; }
  .btn.ghost{ background:#F1F2F4; color:#222; }
  .hint{ font-size:12px; color:var(--muted); margin-top:6px; }

.sort-btn{
  display:inline-flex; align-items:center; gap:6px;
  background:transparent; border:0; color:#fff; cursor:pointer; padding:0; font:inherit;
}
.sort-btn:hover{ opacity:.8; }
th .sort-btn:focus-visible{ outline:2px solid #fff; outline-offset:2px; border-radius:6px; }
.sort-btn .arrow{ font-weight:700; }

  /* Loading */
  .loading {
    text-align: center;
    padding: 20px;
    color: var(--muted);
  }
  .error {
    text-align: center;
    padding: 20px;
    color: var(--brand-red);
    background: #ffe6e6;
    border-radius: var(--radius);
    margin: 10px 0;
  }
</style>
</head>

<body>
  <div class="container">
    <div class="page-header">
      <h1 class="title">Produtos <span class="title-accent">Edel+White 2025</span></h1>
    </div>

    <div class="search-wrap">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="7"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
      <input id="search" class="search-input" placeholder="Buscar por descrição, SKU ou status…" />
      <button id="clearBtn" class="search-clear" title="Limpar busca">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="card">
      <table id="productsTable">
<<<<<<< HEAD
        <thead>
          <tr>
            <th>Descrição</th>
            <th class="sku-col">
              <button type="button" class="sort-btn" data-col="1" aria-label="Ordenar por SKU">
                <span class="label">SKU</span> <span class="arrow">⇅</span>
              </button>
            </th>
            <th>
              <button type="button" class="sort-btn" data-col="2" aria-label="Ordenar por Status">
                <span class="label">Status</span> <span class="arrow">⇅</span>
              </button>
              <button id="lockBtn" class="lock-btn" title="Desbloquear edição do Status">
                <svg id="lockIcon" class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 1 1 10 0v4"></path>
                </svg>
                <span id="lockLabel">Bloqueado</span>
              </button>
            </th>
          </tr>
        </thead>
        <tbody id="lista-produtos">
          <tr>
            <td colspan="3" class="loading">Carregando produtos do Firebase...</td>
          </tr>
=======
<thead>
  <tr>
    <th>Descrição</th>
    <th class="sku-col">
      <button type="button" class="sort-btn" data-col="1" aria-label="Ordenar por SKU">
        <span class="label">SKU</span> <span class="arrow">⇅</span>
      </button>
    </th>


    <th>
      <button type="button" class="sort-btn" data-col="2" aria-label="Ordenar por Status">
        <span class="label">Status</span> <span class="arrow">⇅</span>
      </button>

      <button id="lockBtn" class="lock-btn" title="Desbloquear edição do Status">
        <svg id="lockIcon" class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 1 1 10 0v4"></path>
        </svg>
        <span id="lockLabel">Bloqueado</span>
      </button>
    </th>

    <th class="info-col">
      <button type="button" class="sort-btn" data-col="3" aria-label="Ordenar por Informações">
        <span class="label">Informações</span> <span class="arrow">⇅</span>
      </button>
    </th>

  </tr>
</thead>


        <tbody>

<tr><td>EW-MULT12 CREME DENTAL MULTIPLOS 12 ML</td><td class="sku-col">000-500</td><td class="status-col">Promocional</td><td>-</td></tr>
<tr><td>EW-MULT12 CREME DENTAL INFANTIL MULTIPLOS 9 ML</td><td class="sku-col">000-501</td><td class="status-col">Promocional</td><td>-</td></tr>

<tr><td>EW-BVSD24 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PERSONALIZADA</td><td class="sku-col">001-104</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BRD ESCOVA DE DENTES PORTÁTIL FLOSSERBRUSH TO GO PERSONALIZADA</td><td class="sku-col">001-124</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BVW24 ESCOVA DE DENTES WHITENING PERSONALIZADA</td><td class="sku-col">001-128</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-CC ESCOVA DE DENTES CLEAN CURL CURVED PERSONALIZADA</td><td class="sku-col">001-129</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BVD24 ESCOVA DE DENTES FLOSSERBRUSH SOFT PERSONALIZADA</td><td class="sku-col">001-134</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-K4D ESCOVA DE DENTES FLOSSERBRUSH KIDS PERSONALIZADA</td><td class="sku-col">001-141</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BGUMP24 ESCOVA DE DENTES PRO GUMS IN BULK PERSONALIZADA</td><td class="sku-col">001-278</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BORTHO24 ESCOVA DE  DENTES PRO ORTHO IN BULK PERSONALIZADA</td><td class="sku-col">001-279</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-KIT BASICO PERSONALIZADO</td><td class="sku-col">001-401</td><td class="status-col">Personalizado</td><td>-</td></tr>
<tr><td>EW-BSTL3 ESCOVA UNITUFO PERSONALIZADA</td><td class="sku-col">001-731</td><td class="status-col">Personalizado</td><td>-</td></tr>

<!--COMPOSIÇÃO DO KIT E PROMOCIONAL-->
<tr><td>EW-GUM12 CREME DENTAL CARE FORTE 12 ML</td><td class="sku-col">500-520</td><td class="status-col">Promocional</td><td>-</td></tr> <!--composição kit e promocional-->
<!--<tr><td>EW-OT75 CREME DENTAL OSMOTONIC 12 ML</td><td class="sku-col">100-295</td><td class="status-col">Promocional</td><td>-</td></tr> --> <!--composição kit e promocional--> 
<tr><td>EW-TW12 CREME DENTAL ANTIPLACA + BRANQUEADOR 12 ML</td><td class="sku-col">500-521</td><td class="status-col">Promocional</td><td>-</td></tr> <!--composição kit e promocional-->
<tr><td>EW-MR50 ANTISSEPTICO BUCAL FRESH + PROTECT 50 ML</td><td class="sku-col">500-542</td><td class="status-col">Promocional</td><td>-</td></tr> <!--composição kit e promocional-->
<tr><td>EW-PL5 FITA DENTAL ENCERADA EASY TAPE 5 METROS MENTA</td><td class="sku-col">800-831</td><td class="status-col">Promocional</td><td>-</td></tr> <!--composição kit e promocional-->
<tr><td>EW-WF5 FIO SOFT WOVEN 5 METROS CANELA</td><td class="sku-col">800-851</td><td class="status-col">Promocional</td><td>-</td></tr> <!--composição kit e promocional-->
<tr><td>EW-DISPLAY DE ACRILICO</td><td class="sku-col">400-417</td><td class="status-col">Promocional</td><td>-</td></tr>

<tr><td>EW-BVSD24 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT IN BULK</td><td class="sku-col">100-104</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-VSD2 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PET DUO</td><td class="sku-col">100-105</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-VSD ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PET SINGLE</td><td class="sku-col">100-108</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-VSDF ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT FOIL</td><td class="sku-col">100-109</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-VD ESCOVA DE DENTES FLOSSERBRUSH SOFT PET</td><td class="sku-col">100-114</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-VW ESCOVA DE DENTES WHITENING</td><td class="sku-col">100-119</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-BRD ESCOVA DE DENTES PORTATIL FLOSSERBRUSH TO GO IN BULK</td><td class="sku-col">100-124</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-K3DD ESCOVA DE DENTES FLOSSERBRUSH KIDS DOKI</td><td class="sku-col">100-126</td><td class="status-col">Inativo</td><td>-</td></tr> <!--Sempre manter inativo-->
<tr><td>EW-K3DM ESCOVA DE DENTES FLOSSERBRUSH KIDS MINI BEATS</td><td class="sku-col">100-127</td><td class="status-col">Inativo</td><td>-</td></tr><!--Sempre manter inativo-->
<tr><td>EW-CC ESCOVA DE DENTES CLEANCURL CURVED</td><td class="sku-col">100-129</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ORTHO ESCOVA DE DENTES PRO ORTHO</td><td class="sku-col">100-131</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-BVD24 ESCOVA DE DENTES FLOSSERBRUSH SOFT IN BULK</td><td class="sku-col">100-134</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EWK4D ESCOVA DE DENTES FLOSSERBRUSH KIDS</td><td class="sku-col">100-141</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-WJ900 IRRIGADOR ORAL FLOSSERPIK 3</td><td class="sku-col">100-158</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-WJR9 PONTAS DE REPOSICAO IRRIGADOR ORAL FLOSSERPIK 3</td><td class="sku-col">100-159</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-SG2F CABECAS DE ESCOVA SONIC GENERATION FOCUS DUO</td><td class="sku-col">100-164</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>FLOSSERPIK PRO STATION</td><td class="sku-col">100-165</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-WJR5 PONTAS DE REPOSICAO IRRIGADOR ORAL FLOSSERPIK</td><td class="sku-col">100-167</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-WJ180 IRRIGADOR ORAL PORTATIL FLOSSERPICK POWER SPA</td><td class="sku-col">100-171</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-WJR2 PONTAS DE REPOSICAO IRRIGADOR ORAL PORTATIL POWER SPA</td><td class="sku-col">100-172</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-WJR3 PONTA DE REPOSICAO DO IRRIGADOR ORAL PRO STATION</td><td class="sku-col">100-173</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>MS-ESCOVA DE DENTES SONIC BLACK WHITENING (COR AMARELO)</td><td class="sku-col">100-179</td><td class="status-col">Inativo</td><td>-</td></tr>

<tr><td>EW-SG2A CABECA DE ESCOVA DE DENTES SONIC CLEAN CURL</td><td class="sku-col">100-185</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-SG2W CABECAS DE ESCOVA SONIC GENERATION WHITENING</td><td class="sku-col">100-189</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-SG2A CABECAS DE ESCOVA DE DENTES SONIC GENERATION WINNER</td><td class="sku-col">100-192</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-SG2B CABECAS DE ESCOVA DE DENTES SONIC TARGET & FOCUS</td><td class="sku-col">100-193</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-SG8 ESCOVA DE DENTES SONIC GENERATION HEALTH SUITE</td><td class="sku-col">100-199</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>MS-ESCOVA DE DENTES SONIC BLACK WHITENING PRETA</td><td class="sku-col">100-220</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>MS-ESCOVA DE DENTES SONIC BLACK WHITENING (COR PRETA)</td><td class="sku-col">100-220A</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL SSS (SACO COM 25 UNIDADES)</td><td class="sku-col">100-242</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL SS (SACO COM 25 UNIDADES)</td><td class="sku-col">100-243</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL S (SACO COM 25 UNIDADES)</td><td class="sku-col">100-244</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL M (SACO COM 25 UNIDADES)</td><td class="sku-col">100-245</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL L (SACO COM 25 UNIDADES)</td><td class="sku-col">100-246</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7.25 ESCOVA INTERDENTAL XS (SACO COM 25 UNIDADES)</td><td class="sku-col">100-247</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-GUMP ESCOVA DE DENTES PRO GUMS</td><td class="sku-col">100-256</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-BORTHO24 ESCOVA DE DENTES PRO ORTHO IN BULK</td><td class="sku-col">100-279</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-OT75 CREME DENTAL OSMOTONIC 75 ML</td><td class="sku-col">100-294</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-TD ESCOVA DE DENTES PORTATIL FLOSSERBRUSH TO GO</td><td class="sku-col">130-118</td><td class="status-col">Ativo</td><td>-</td></tr>S
<tr><td>EW-ID7 XS ESCOVA INTERDENTAL 0.42MM</td><td class="sku-col">300-331</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7 SSS ESCOVA INTERDENTAL 0.45MM</td><td class="sku-col">300-332</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7 SS ESCOVA INTERDENTAL 0.5MM</td><td class="sku-col">300-333</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7 S ESCOVA INTERDENTAL 0.6MM</td><td class="sku-col">300-334</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7 M ESCOVA INTERDENTAL 0,7MM</td><td class="sku-col">300-335</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7 L ESCOVA INTERDENTAL 0.8MM</td><td class="sku-col">300-336</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-ID7.40A ESCOVA INTERDENTAL</td><td class="sku-col">300-381</td><td class="status-col">Ativo</td><td>-</td></tr>

<!--<tr><td>EW-BOLSINHA DE PLASTICO</td><td class="sku-col">400-401</td><td class="status-col">Inativo</td><td>-</td></tr>-->

<tr><td>EW-KV KIT DE VIAGEM</td><td class="sku-col">400-454</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-SW75 CREME DENTAL SWISS WHITENING 75 ML</td><td class="sku-col">500-501</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-SR75 CREME DENTAL STOP SENSITIVE 75 ML</td><td class="sku-col">500-505</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-GUM75 CREME DENTAL CARE FORTE 75 ML</td><td class="sku-col">500-510</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-TW75 CREME DENTAL ANTIPLACA + BRANQUEADOR 75 ML</td><td class="sku-col">500-511</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW KF7 CREME DENTAL INFANTIL FRUCHTLI KIDS 7</td><td class="sku-col">500-532</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-MR400 ANTISSEPTICO BUCAL FRESH + PROTECT 400 ML</td><td class="sku-col">500-541</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-CHX1.2 ENXAQUATORIO 0.00 BUCAL PERIO STOP IRRITATION 300 ML</td><td class="sku-col">500-556</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>CREME DENTAL INFANTIL FRUCHTLI KIDS 9,4 ML</td><td class="sku-col">500-564</td><td class="status-col">Inativo</td><td>-</td></tr>
<tr><td>EW-TC4 LIMPADOR DE LINGUA</td><td class="sku-col">700-711</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-STL3 ESCOVA UNITUFO</td><td class="sku-col">700-731</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-PCR250 REFIL FITA DENTAL ENCERADA EASY TAPE 250 METROS</td><td class="sku-col">800-828</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-PC70 FITA DENTAL ENCERADA EASY TAPE 70 METROS LIMAO</td><td class="sku-col">800-829</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-PL70 FITA DENTAL ENCERADA EASY TAPE 70 METROS MENTA</td><td class="sku-col">800-830</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-PL250 DISPENSER FITA DENTAL ENCERADA EASY TAPE 250 METROS</td><td class="sku-col">800-832</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-PL250 REFIL FITA DENTAL ENCERADA EASY TAPE 250 METROS MENTA</td><td class="sku-col">800-833</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-BPS50 PICK STICKS SSS-S</td><td class="sku-col">800-835</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-BPS50 PICK STICKS</td><td class="sku-col">800-836</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EWWF40 FIO DENTAL SOFT WOVEN</td><td class="sku-col">800-850</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-EF25 FIO DENTAL EXPANDING SUPERFLOSS 25 METROS</td><td class="sku-col">800-852</td><td class="status-col">Ativo</td><td>-</td></tr>
<tr><td>EW-XF50 FIO DENTAL SUPERSOFT FLOSS</td><td class="sku-col">800-853</td><td class="status-col">Inativo</td><td>-</td></tr>



          <!-- ✅ Cole aqui TODAS as demais linhas (as que já te entreguei antes) -->
>>>>>>> 4234e174f11169674fedcebf7c72dff1db51f453
        </tbody>
      </table>
    </div>

    <p class="hint">Dica: clique no cadeado para desbloquear/ bloquear a edição da coluna <b>Status</b>.</p>
  </div>

  <!-- Modal de senha -->
  <div id="pwdModal" class="modal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dlgTitle">
      <h3 id="dlgTitle">Desbloquear edição</h3>
      <p>Informe a senha para editar os valores da coluna <b>Status</b>.</p>
      <div class="field">
        <input id="pwdInput" type="password" placeholder="Senha" />
        <button id="seeBtn" class="btn ghost" type="button">Ver</button>
      </div>
      <div class="actions">
        <button id="cancelBtn" class="btn ghost" type="button">Cancelar</button>
        <button id="unlockBtn" class="btn primary" type="button">Desbloquear</button>
      </div>
    </div>
  </div>

<script type="module">
 // ====== IMPORTS FIREBASE ======
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getDatabase, ref, set, onValue, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

// ====== CONFIGURAÇÃO DO SEU PROJETO ======
const firebaseConfig = {
  apiKey: "AIzaSyC1D-4GxAbWrD1TYeBl5Aeiq6UaJVCHA14",
  authDomain: "produtosedelwhite.firebaseapp.com",
  databaseURL: "https://produtosedelwhite-default-rtdb.firebaseio.com",
  projectId: "produtosedelwhite",
  storageBucket: "produtosedelwhite.firebasestorage.app",
  messagingSenderId: "61520958217",
  appId: "1:61520958217:web:8214c3af026d72f1c7f9d8"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const produtosRef = ref(db, "produtos");

const lista = document.getElementById("lista-produtos");
let edicaoAtiva = false;

// Dados iniciais dos produtos
const produtosIniciais = [
  { descricao: "EW-MULT12 CREME DENTAL MULTIPLOS 12 ML", sku: "000-500", status: "Promocional" },
  { descricao: "EW-MULT12 CREME DENTAL INFANTIL MULTIPLOS 9 ML", sku: "000-501", status: "Promocional" },
  { descricao: "EW-BVSD24 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PERSONALIZADA", sku: "001-104", status: "Personalizada" },
  { descricao: "EW-BRD ESCOVA DE DENTES PORTÁTIL FLOSSERBRUSH TO GO PERSONALIZADA", sku: "001-124", status: "Personalizada" },
  { descricao: "EW-BVW24 ESCOVA DE DENTES WHITENING PERSONALIZADA", sku: "001-128", status: "Personalizada" },
  { descricao: "EW-CC ESCOVA DE DENTES CLEAN CURL CURVED PERSONALIZADA", sku: "001-129", status: "Personalizada" },
  { descricao: "EW-BVD24 ESCOVA DE DENTES FLOSSERBRUSH SOFT PERSONALIZADA", sku: "001-134", status: "Personalizada" },
  { descricao: "EW-K4D ESCOVA DE DENTES FLOSSERBRUSH KIDS PERSONALIZADA", sku: "001-141", status: "Personalizada" },
  { descricao: "EW-BGUMP24 ESCOVA DE DENTES PRO GUMS IN BULK PERSONALIZADA", sku: "001-278", status: "Personalizada" },
  { descricao: "EW-BORTHO24 ESCOVA DE  DENTES PRO ORTHO IN BULK PERSONALIZADA", sku: "001-279", status: "Personalizada" },
  { descricao: "EW-KIT BASICO PERSONALIZADO", sku: "001-401", status: "Personalizada" },
  { descricao: "EW-BSTL3 ESCOVA UNITUFO PERSONALIZADA", sku: "001-731", status: "Personalizada" },
  { descricao: "EW-BVSD24 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT IN BULK", sku: "100-104", status: "Inativo" },
  { descricao: "EW-VSD2 ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PET DUO", sku: "100-105", status: "Inativo" },
  { descricao: "EW-VSD ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT PET SINGLE", sku: "100-108", status: "Ativo" },
  { descricao: "EW-VSDF ESCOVA DE DENTES FLOSSERBRUSH ULTRASOFT FOIL", sku: "100-109", status: "Inativo" },
  { descricao: "EW-VD ESCOVA DE DENTES FLOSSERBRUSH SOFT PET", sku: "100-114", status: "Inativo" },
  { descricao: "EW-VW ESCOVA DE DENTES WHITENING", sku: "100-119", status: "Ativo" },
  { descricao: "EW-BRD ESCOVA DE DENTES PORTATIL FLOSSERBRUSH TO GO IN BULK", sku: "100-124", status: "Inativo" },
  { descricao: "EW-K3DD ESCOVA DE DENTES FLOSSERBRUSH KIDS DOKI", sku: "100-126", status: "Ativo" },
  { descricao: "EW-K3DM ESCOVA DE DENTES FLOSSERBRUSH KIDS MINI BEATS", sku: "100-127", status: "Inativo" },
  { descricao: "EW-CC ESCOVA DE DENTES CLEANCURL CURVED", sku: "100-129", status: "Ativo" },
  { descricao: "EW-ORTHO ESCOVA DE DENTES PRO ORTHO", sku: "100-131", status: "Ativo" },
  { descricao: "EW-BVD24 ESCOVA DE DENTES FLOSSERBRUSH SOFT IN BULK", sku: "100-134", status: "Inativo" },
  { descricao: "EWK4D ESCOVA DE DENTES FLOSSERBRUSH KIDS", sku: "100-141", status: "Ativo" },
  { descricao: "EW-WJ900 IRRIGADOR ORAL FLOSSERPIK 3", sku: "100-158", status: "Inativo" },
  { descricao: "EW-WJR9 PONTAS DE REPOSICAO IRRIGADOR ORAL FLOSSERPIK 3", sku: "100-159", status: "Ativo" },
  { descricao: "EW-SG2F CABECAS DE ESCOVA SONIC GENERATION FOCUS DUO", sku: "100-164", status: "Ativo" },
  { descricao: "FLOSSERPIK PRO STATION", sku: "100-165", status: "Ativo" },
  { descricao: "EW-WJR5 PONTAS DE REPOSICAO IRRIGADOR ORAL FLOSSERPIK", sku: "100-167", status: "Ativo" },
  { descricao: "EW-WJ180 IRRIGADOR ORAL PORTATIL FLOSSERPICK POWER SPA", sku: "100-171", status: "Inativo" },
  { descricao: "EW-WJR2 PONTAS DE REPOSICAO IRRIGADOR ORAL PORTATIL POWER SPA", sku: "100-172", status: "Ativo" },
  { descricao: "EW-WJR3 PONTA DE REPOSICAO DO IRRIGADOR ORAL PRO STATION", sku: "100-173", status: "Inativo" },
  { descricao: "MS-ESCOVA DE DENTES SONIC BLACK WHITENING (COR AMARELO)", sku: "100-179", status: "Inativo" },
  { descricao: "MS-ESCOVA DE DENTES SONIC BLACK WHITENING (COR AZUL)", sku: "100-180", status: "Inativo" },
  { descricao: "EW-SG2A CABECA DE ESCOVA DE DENTES SONIC CLEAN CURL", sku: "100-185", status: "Ativo" },
  { descricao: "EW-SG2W CABECAS DE ESCOVA SONIC GENERATION WHITENING", sku: "100-189", status: "Ativo" },
  { descricao: "EW-SG2A CABECAS DE ESCOVA DE DENTES SONIC GENERATION WINNER", sku: "100-192", status: "Ativo" },
  { descricao: "EW-SG2B CABECAS DE ESCOVA DE DENTES SONIC TARGET & FOCUS", sku: "100-193", status: "Inativo" },
  { descricao: "MS-ESCOVA DE DENTES BLACK WHITENING LOOP SINGLE", sku: "100-199", status: "Ativo" },
  { descricao: "MS-ESCOVA DE DENTES SONIC BLACK WHITENING PRETA", sku: "100-220", status: "Inativo" },
  { descricao: "MS-ESCOVA DE DENTES SONIC BLACK WHITENING (COR PRETA)", sku: "100-220A", status: "Inativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL SSS (SACO COM 25 UNIDADES)", sku: "100-242", status: "Ativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL SS (SACO COM 25 UNIDADES)", sku: "100-243", status: "Ativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL S (SACO COM 25 UNIDADES)", sku: "100-244", status: "Ativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL M (SACO COM 25 UNIDADES)", sku: "100-245", status: "Ativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL L (SACO COM 25 UNIDADES)", sku: "100-246", status: "Ativo" },
  { descricao: "EW-ID7.25 ESCOVA INTERDENTAL XS (SACO COM 25 UNIDADES)", sku: "100-247", status: "Inativo" },
  { descricao: "EW-GUMP ESCOVA DE DENTES PRO GUMS", sku: "100-256", status: "Ativo" },
  { descricao: "EW-BORTHO24 ESCOVA DE DENTES PRO ORTHO IN BULK", sku: "100-279", status: "Inativo" },
  { descricao: "EW-OT75 CREME DENTAL OSMOTONIC 75 ML", sku: "100-294", status: "Ativo" },
  { descricao: "EW-OT75 CREME DENTAL OSMOTONIC 12 ML", sku: "100-295", status: "Inativo" },
  { descricao: "EW-TD ESCOVA DE DENTES PORTATIL FLOSSERBRUSH TO GO", sku: "130-118", status: "Ativo" },
  { descricao: "EW-ID7 XS ESCOVA INTERDENTAL 0.42MM", sku: "300-331", status: "Inativo" },
  { descricao: "EW-ID7 SSS ESCOVA INTERDENTAL 0.45MM", sku: "300-332", status: "Ativo" },
  { descricao: "EW-ID7 SS ESCOVA INTERDENTAL 0.5MM", sku: "300-333", status: "Ativo" },
  { descricao: "EW-ID7 S ESCOVA INTERDENTAL 0.6MM", sku: "300-334", status: "Ativo" },
  { descricao: "EW-ID7 M ESCOVA INTERDENTAL 0,7MM", sku: "300-335", status: "Ativo" },
  { descricao: "EW-ID7 L ESCOVA INTERDENTAL 0.8MM", sku: "300-336", status: "Ativo" },
  { descricao: "EW-ID7.40A ESCOVA INTERDENTAL", sku: "300-381", status: "Ativo" },
  { descricao: "EW-BOLSINHA DE PLASTICO", sku: "400-401", status: "Inativo" },
  { descricao: "EW-DISPLAY DE ACRILICO", sku: "400-417", status: "Ativo" },
  { descricao: "EW-PROMOCIONAL DE ACRILICO SHELF13", sku: "400-437", status: "Inativo" },
  { descricao: "EW-KV KIT DE VIAGEM", sku: "400-454", status: "Inativo" },
  { descricao: "EW-SW75 CREME DENTAL SWISS WHITENING 75 ML", sku: "500-501", status: "Inativo" },
  { descricao: "EW-SR75 CREME DENTAL STOP SENSITIVE 75 ML", sku: "500-505", status: "Ativo" },
  { descricao: "EW-GUM75 CREME DENTAL CARE FORTE 75 ML", sku: "500-510", status: "Ativo" },
  { descricao: "EW-TW75 CREME DENTAL ANTIPLACA + BRANQUEADOR 75 ML", sku: "500-511", status: "Ativo" },
  { descricao: "EW-GUM12 CREME DENTAL CARE FORTE 12 ML", sku: "500-520", status: "Inativo" },
  { descricao: "EW-TW12 CREME DENTAL ANTIPLACA + BRANQUEADOR 12 ML", sku: "500-521", status: "Ativo" },
  { descricao: "EW KF7 CREME DENTAL INFANTIL FRUCHTLI KIDS 7", sku: "500-532", status: "Ativo" },
  { descricao: "EW-MR400 ANTISSEPTICO BUCAL FRESH + PROTECT 400 ML", sku: "500-541", status: "Ativo" },
  { descricao: "EW-MR50 ANTISSEPTICO BUCAL FRESH + PROTECT 50 ML", sku: "500-542", status: "Promocional" },
  { descricao: "EW-CHX1.2 ENXAQUATORIO 0.00 BUCAL PERIO STOP IRRITATION 300 ML", sku: "500-556", status: "Inativo" },
  { descricao: "CREME DENTAL INFANTIL FRUCHTLI KIDS 9,4 ML", sku: "500-564", status: "Inativo" },
  { descricao: "EW-TC4 LIMPADOR DE LINGUA", sku: "700-711", status: "Ativo" },
  { descricao: "EW-STL3 ESCOVA UNITUFO", sku: "700-731", status: "Ativo" },
  { descricao: "EW-PCR250 REFIL FITA DENTAL ENCERADA EASY TAPE 250 METROS", sku: "800-828", status: "Ativo" },
  { descricao: "EW-PC70 FITA DENTAL ENCERADA EASY TAPE 70 METROS LIMAO", sku: "800-829", status: "Ativo" },
  { descricao: "EW-PL70 FITA DENTAL ENCERADA EASY TAPE 70 METROS MENTA", sku: "800-830", status: "Ativo" },
  { descricao: "EW-PL5 FITA DENTAL ENCERADA EASY TAPE 5 METROS MENTA", sku: "800-831", status: "Promocional" },
  { descricao: "EW-PL250 DISPENSER FITA DENTAL ENCERADA EASY TAPE 250 METROS", sku: "800-832", status: "Ativo" },
  { descricao: "EW-PL250 REFIL FITA DENTAL ENCERADA EASY TAPE 250 METROS MENTA", sku: "800-833", status: "Ativo" },
  { descricao: "EW-BPS50 PICK STICKS SSS-S", sku: "800-835", status: "Ativo" },
  { descricao: "EW-BPS50 PICK STICKS", sku: "800-836", status: "Ativo" },
  { descricao: "EWWF40 FIO DENTAL SOFT WOVEN", sku: "800-850", status: "Ativo" },
  { descricao: "EW-WF5 FIO SOFT WOVEN 5 METROS CANELA", sku: "800-851", status: "Promocional" },
  { descricao: "EW-EF25 FIO DENTAL EXPANDING SUPERFLOSS 25 METROS", sku: "800-852", status: "Ativo" },
  { descricao: "EW-XF50 FIO DENTAL SUPERSOFT FLOSS", sku: "800-853", status: "Ativo" },
  { descricao: "PRODUTOS DE HIGIENE BUCAL", sku: "999-999", status: "Inativo" }
];

// Função para inicializar dados no Firebase apenas uma vez
function inicializarDados() {
  onValue(produtosRef, (snapshot) => {
    const dados = snapshot.val();
    
    // Se não há dados no Firebase, carrega os dados iniciais
    if (!dados || Object.keys(dados).length === 0) {
      console.log("Inicializando dados no Firebase...");
      const dadosIniciais = {};
      produtosIniciais.forEach((produto, index) => {
        dadosIniciais[`produto_${index}`] = produto;
      });
      
      set(produtosRef, dadosIniciais)
        .then(() => {
          console.log("Dados iniciais carregados com sucesso!");
          carregarTabela(); // Carrega a tabela após inicializar
        })
        .catch((error) => {
          console.error("Erro ao carregar dados iniciais:", error);
        });
    } else {
      console.log("Dados já existem no Firebase, carregando tabela...");
      carregarTabela(); // Carrega a tabela se dados já existem
    }
  }, { onlyOnce: true });
}

// Função para atualizar a cor do select baseado no status
function atualizarCorStatus(selectElement, status) {
  // Remove todas as classes de status anteriores
  selectElement.removeAttribute('data-status');
  // Adiciona a classe correspondente ao status atual
  selectElement.setAttribute('data-status', status);
}

// Função para carregar a tabela
function carregarTabela() {
  onValue(produtosRef, (snapshot) => {
    const dados = snapshot.val() || {};
    console.log("Carregando tabela com", Object.keys(dados).length, "produtos");
    
    lista.innerHTML = "";

    Object.entries(dados).forEach(([id, produto]) => {
      const linha = document.createElement("tr");
      linha.innerHTML = `
        <td>${produto.descricao}</td>
        <td class="sku-col">${produto.sku}</td>
        <td>
          <select class="status-select" data-id="${id}" ${!edicaoAtiva ? "disabled" : ""}>
            <option value="Ativo" ${produto.status === "Ativo" ? "selected" : ""}>Ativo</option>
            <option value="Inativo" ${produto.status === "Inativo" ? "selected" : ""}>Inativo</option>
            <option value="Promocional" ${produto.status === "Promocional" ? "selected" : ""}>Promocional</option>
            <option value="Personalizada" ${produto.status === "Personalizada" ? "selected" : ""}>Personalizada</option>
          </select>
        </td>
      `;
      lista.appendChild(linha);
      
      // Aplica a cor inicial baseada no status
      const select = linha.querySelector('.status-select');
      atualizarCorStatus(select, produto.status);
    });

    // Adiciona event listeners para os selects
    document.querySelectorAll(".status-select").forEach(select => {
      select.addEventListener("change", e => {
        if (!edicaoAtiva) return;
        const id = e.target.dataset.id;
        const novoStatus = e.target.value;
        
        // Atualiza a cor imediatamente
        atualizarCorStatus(e.target, novoStatus);
        
        update(ref(db, `produtos/${id}`), { status: novoStatus })
          .then(() => {
            console.log("Status atualizado com sucesso");
          })
          .catch((error) => {
            console.error("Erro ao atualizar status:", error);
          });
      });
    });

    // Aplica filtro se houver texto na busca
    const searchInput = document.getElementById('search');
    if (searchInput && searchInput.value) {
      filterTable();
    }
  });
}

// Função para aplicar filtro de busca
const filterTable = () => {
  const search = document.getElementById('search');
  const q = normalize(search.value);
  const rows = document.querySelectorAll('#lista-produtos tr');
  
  for (const r of rows) {
    const txt = normalize(r.innerText);
    r.style.display = txt.includes(q) ? '' : 'none';
  }
};

// ======= Configurações =======
const PASSWORD = '5674';
const table = document.getElementById('productsTable');
// ===== Ordenação SKU/Status =====
const sortState = { 1: null, 2: null };

document.querySelectorAll('.sort-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const col = Number(btn.dataset.col);
    sortState[col] = sortState[col] === 'asc' ? 'desc' : 'asc';
    const asc = sortState[col] === 'asc';

    const tbody = table.tBodies[0];
    const rows = Array.from(tbody.rows);

    rows.sort((ra, rb) => {
      const a = ra.cells[col].textContent.trim();
      const b = rb.cells[col].textContent.trim();

      if (col === 1) { // SKU
        const an = parseInt(a.replace(/\D/g, ''), 10);
        const bn = parseInt(b.replace(/\D/g, ''), 10);
        return asc ? an - bn : bn - an;
      } else {        // Status
        return asc
          ? a.localeCompare(b, 'pt-BR', { sensitivity: 'base' })
          : b.localeCompare(a, 'pt-BR', { sensitivity: 'base' });
      }
    });

    rows.forEach(r => tbody.appendChild(r));

    document.querySelectorAll('.sort-btn .arrow').forEach(el => el.textContent = '⇅');
    btn.querySelector('.arrow').textContent = asc ? '▲' : '▼';
  });
});

// ======= Busca com remoção de acentos =======
const search = document.getElementById('search');
const clearBtn = document.getElementById('clearBtn');

const normalize = s => s
  .toString()
  .toLowerCase()
  .normalize('NFD')
  .replace(/\p{Diacritic}/gu, '');

search.addEventListener('input', filterTable);
clearBtn.addEventListener('click', () => { 
  search.value=''; 
  filterTable(); 
  search.focus(); 
});

// ======= Cadeado / Modal =======
const lockBtn = document.getElementById('lockBtn');
const lockIcon = document.getElementById('lockIcon');
const lockLabel = document.getElementById('lockLabel');
const modal = document.getElementById('pwdModal');
const pwdInput = document.getElementById('pwdInput');
const unlockBtn = document.getElementById('unlockBtn');
const cancelBtn = document.getElementById('cancelBtn');
const seeBtn = document.getElementById('seeBtn');

function setLocked(state){
  locked = state;
  edicaoAtiva = !state;
  
  document.querySelectorAll('.status-select').forEach(select => {
    select.disabled = state;
  });
  
  lockIcon.innerHTML = state
    ? '<rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 1 1 10 0v4"></path>'
    : '<rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 1 1 10 0"></path><path d="M17 7v4"></path>';
  lockLabel.textContent = state ? 'Bloqueado' : 'Desbloqueado';
  lockBtn.title = state ? 'Desbloquear edição do Status' : 'Bloquear edição do Status';
}

// abre modal
lockBtn.addEventListener('click', () => {
  if (!locked){ setLocked(true); return; }
  modal.classList.add('show');
  modal.setAttribute('aria-hidden','false');
  pwdInput.value=''; pwdInput.focus();
});

// ver/ocultar senha
seeBtn.addEventListener('click', () => {
  const t = pwdInput.getAttribute('type') === 'password' ? 'text' : 'password';
  pwdInput.setAttribute('type', t);
  seeBtn.textContent = t === 'password' ? 'Ver' : 'Ocultar';
});

// desbloquear
unlockBtn.addEventListener('click', () => {
  if (pwdInput.value === PASSWORD){
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
    setLocked(false);
  } else {
    alert('Senha incorreta.');
    pwdInput.select();
  }
});

// cancelar
cancelBtn.addEventListener('click', () => {
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden','true');
});

// fecha modal com ESC ou clique fora
document.addEventListener('keydown', e => {
  if (e.key === 'Escape' && modal.classList.contains('show')) cancelBtn.click();
});
modal.addEventListener('click', e => {
  if (e.target === modal) cancelBtn.click();
});

// Inicializa a aplicação
let locked = true;
setLocked(true);

// Inicia o carregamento quando a página estiver pronta
document.addEventListener('DOMContentLoaded', () => {
  console.log("DOM carregado, inicializando dados...");
  inicializarDados();
});
</script>
</body>
</html>